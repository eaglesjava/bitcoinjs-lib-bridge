<!DOCTYPE html>
<html>
<head>
    <title>Bitcoinjs lib bridge</title>
    <meta charset="UTF-8">
</head>
<body>

<script type="text/javascript" src="bitcoinjs-lib-app.js"></script>
<script type="text/javascript">

    function validateMnemonicReturnSeedHexAndXPublicKey(mnemonic){
        var result={};
        try {
               var validate=bridge.validateMnemonic(mnemonic)
               var seedHex = bridge.mnemonicToSeedHex(mnemonic, '')
               var publicKeys = bridge.getBitcoinXPublicKeys(seedHex)
               result.status=0
               result.data=[validate,seedHex,publicKeys[0],publicKeys[1]]
           }catch(e){
               result.data=[]
               result.message=e.stack
               result.status=-1
           }
        return JSON.stringify(result)
    }

    function generateMnemonicRetrunSeedHexAndXPublicKey(isCN){
       var result={};
       try {
            var mnemonic;
            if(isCN==1){
                mnemonic= bridge.generateMnemonicRandomCN(128)
            }else{
                mnemonic= bridge.generateMnemonicRandom(128)
            }
            var seedHex = bridge.mnemonicToSeedHex(mnemonic,'')
            var publicKeys = bridge.getBitcoinXPublicKeys(seedHex)
            result.status=0
            result.data=[mnemonic,seedHex,publicKeys[0],publicKeys[1]]
       }catch(e){
            result.data=[]
            result.message=e.stack
            result.status=-1
       }
       return JSON.stringify(result)
    }

    function getBitcoinAddressByMasterXPublicKey(xpub,index){
        var result={};
        try {
            var address=bridge.getBitcoinAddressByMasterXPublicKey(xpub,index)
            result.status=0
            result.data=[address]
        }catch(e){
            result.data=[]
            result.message=e.stack
            result.status=-1
        }
       return JSON.stringify(result)
    }

    function buildTransaction(seedHex, datas){
        var result={};
        try {
            var txbHex=bridge.buildTransaction(seedHex,datas)
            result.status=0
            result.data=[txbHex]
        }catch(e){
            result.data=[]
            result.message=e.stack
            result.status=-1
        }
       return JSON.stringify(result)
    }

    function validateAddress(address){
        var result={};
        try {
            var validate=bridge.validateAddress(address)
            result.status=0
            result.data=[validate]
        }catch(e){
            result.data=[]
            result.message=e.stack
            result.status=-1
        }
       return JSON.stringify(result)
    }

    function getBitcoinContinuousAddressByMasterXPublicKey(xpub,fromIndex,inIndex){
        var result={};
        try {
            var addresses=bridge.getBitcoinContinuousAddressByMasterXPublicKey(xpub,fromIndex,inIndex)
            result.status=0
            result.data=addresses
        }catch(e){
            result.data=[]
            result.message=e.stack
            result.status=-1
        }
       return JSON.stringify(result)
    }

    function getPublicKeyAndArressFormPrivateKey(privateKey){
        var result={};
        try {
            var result=bridge.getPublicKeyAndArressFormPrivateKey(privateKey)
            result.status=0
            result.data=result
        }catch(e){
            result.data=[]
            result.message=e.stack
            result.status=-1
        }
       return JSON.stringify(result)
    }



</script>
</body>
</html>
